{"mappings":"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","sources":["src/utilities/TemplateGen.ts","src/elements/form-block.ts","src/elements/input-block.ts","src/elements/button-block.ts","src/pages/registration.ts","src/pages/authorization.ts","src/main.ts"],"sourcesContent":["//Генератор шаблонов\r\n//На вход подаётся строка с макросами в скобках {{}} и объект со значениями макросов\r\n//Пример:\r\n/*\r\n\tСтрока: '<div class=\"{{className}}\"></div>'\r\n\tОбъект: {className: 'test-class'}\r\n*/\r\n\r\nexport default class TemplateGen {\r\n\r\n\treadonly TEMPLATE_REGULAR = /\\{\\{(.*?)\\}\\}/;\r\n\r\n\treadonly templateBlock: string = \"\";\r\n\r\n\tconstructor(templateBlock: string) {\r\n\t\tthis.templateBlock = templateBlock\r\n\t}\r\n\r\n\tgenerateTemplate(template: Record<string, unknown>): string {\r\n\t\tif (template && this.templateBlock){\r\n\t\t\treturn this.changeTemplateKeys(template, this.templateBlock, this.TEMPLATE_REGULAR);\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tchangeTemplateKeys(template, tmp, templateRegular): string {\r\n\t\tlet templateKeys = templateRegular.exec(tmp);\r\n\t\tif (templateKeys && templateKeys[1]){\r\n\t\t\tconst templateKey = templateKeys[1];\r\n\t\t\tfor (let key in template) {\r\n\t\t\t\tif (key == templateKeys[1]){\r\n\t\t\t\t\tif (typeof template[templateKey] == \"string\"){\r\n\t\t\t\t\t\ttmp = tmp.replace(templateKeys[0], template[templateKey]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t\tif (templateRegular.exec(tmp)){\r\n\t\t\treturn this.changeTemplateKeys(template, tmp, templateRegular);\r\n\t\t} else {\r\n\t\t\treturn tmp;\r\n\t\t}\r\n\t}\r\n}","//Блок input\r\n\r\nimport TemplateGen from '../utilities/TemplateGen'\r\n\r\nconst formBlockTemplate = `\r\n\t<div class=\"reg-form-page\">\r\n\t\t<div class=\"reg-form-wrapper\">\r\n\t\t\t<h2>{{title}}</h2>\r\n\t\t\t<form class=\"reg-form\">\r\n\t\t\t\t<fieldset>\r\n\t\t\t\t\t<div class=\"reg-form-fieldset\"></div>\r\n\t\t\t\t\t<div class=\"form-block info-block\">{{errorInfo}}</div>\r\n\t\t\t\t\t<div class=\"form-block buttons-wrapper\"></div>\r\n\t\t\t\t</fieldset>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t</div>`;\r\n\r\nexport type FormParams = {\r\n\ttitle: string,\r\n\terrorInfo: string,\r\n};\r\n\r\nexport default class Form /*extends Block*/ {\r\n\tparams: FormParams\r\n\r\n\tconstructor(params: FormParams) {\r\n\t\tthis.params = params;\r\n\t\t//super('button', props, props.className)\r\n\t}\r\n\r\n\trender(): string {\r\n\t\treturn new TemplateGen(formBlockTemplate).generateTemplate(this.params);\r\n\t}\r\n\r\n\tinsertBlock(element: string): void {\r\n\t\tconst inner = new DOMParser().parseFromString(new TemplateGen(formBlockTemplate).generateTemplate(this.params), \"text/html\").getElementsByTagName(\"div\")[0]; //this.element;\r\n\t\tconst wrapper = document.querySelector(element);\r\n\t\tif (!inner || !wrapper) return;\r\n\t\twrapper.appendChild(inner);\r\n\t}\r\n}\r\n\r\nexport function onSubmitForm(): void {\r\n\tconst form: HTMLFormElement  = document.querySelector('.reg-form');\r\n\tconsole.log(form);\r\n\tif (!form) return\r\n\r\n\t//Тут ещё сделать валидацию\r\n\tconst data: FormData = new FormData(form);\r\n\tconsole.log(...data);\r\n\r\n\t//if (formIsValid(form)) {\r\n\t//\tconst data: FormData = new FormData(form)\r\n\t//\tconsole.log(...data)\r\n\r\n\t\t//cb()\r\n\t//} else {\r\n\t\treturn;\r\n\t//}\r\n}","//Блок input\r\n\r\nimport TemplateGen from '../utilities/TemplateGen'\r\n\r\nconst inputBlockTemplate = `\r\n\t<div class=\"form-block\">\r\n\t\t<label class=\"form-label\" for=\"{{id}}\">{{label}}</label>\r\n\t\t<div class=\"input-wrapper {{errorHightlightClass}}\">\r\n\t\t\t<input class=\"form-control input-styles \" id=\"{{id}}\" type=\"{{type}}\" value=\"{{value}}\" name=\"{{name}}\">\r\n\t\t\t<div class=\"error-text-block\">{{errorText}}</div>\r\n\t\t</div>\r\n\t</div>`;\r\n\r\nexport type InputParams = {\r\n\telement: string,\r\n\tid: string,\r\n\tlabel: string,\r\n\tvalue: string,\r\n\ttype: string,\r\n\tname: string,\r\n\terrorText: string,\r\n\terrorHightlightClass: string,\r\n}\r\n\r\nexport default class Input /*extends Block*/ {\r\n\tparams: InputParams\r\n\r\n\tconstructor(params: InputParams) {\r\n\t\tthis.params = params;\r\n\t\t//super('button', props, props.className)\r\n\t}\r\n\r\n\trender(): string {\r\n\t\treturn new TemplateGen(inputBlockTemplate).generateTemplate(this.params);\r\n\t}\r\n\r\n\tinsertBlock(element: string): void {\r\n\t\tconst inner = new DOMParser().parseFromString(new TemplateGen(inputBlockTemplate).generateTemplate(this.params), \"text/html\").getElementsByTagName(\"div\")[0]; //this.element;\r\n\t\tconst wrapper = document.querySelector(element);\r\n\t\tif (!inner || !wrapper) return;\r\n\t\tlet input = inner.querySelector('input')\r\n\t\tinput.addEventListener('focus', function(){\r\n\t\t\tinput.classList.add('focus-input');\r\n\t\t});\r\n\t\tinput.addEventListener('blur', function(){\r\n\t\t\tinput.classList.remove('focus-input');\r\n\t\t\t//Тут ещё вызывать валидацию\r\n\t\t});\r\n\t\twrapper.appendChild(inner);\r\n\t}\r\n}","//Блок кнопки\r\n\r\nimport TemplateGen from '../utilities/TemplateGen'\r\n\r\nconst buttonBlockTemplate = `<button class=\"button-link {{classes}}\">{{name}}</button>`;\r\n\r\nexport type ButtonParams = {\r\n\telement: string,\r\n\tid: string,\r\n\tclasses: string,\r\n\tname: string,\r\n\tonClick: (event: Event) => void\r\n}\r\n\r\nexport default class Button /*extends Block*/ {\r\n\tparams: ButtonParams\r\n\r\n\tconstructor(params: ButtonParams) {\r\n\t\tthis.params = params;\r\n\t\t//super('button', props, props.className)\r\n\t}\r\n\r\n\trender(): string {\r\n\t\treturn new TemplateGen(buttonBlockTemplate).generateTemplate(this.params);\r\n\t}\r\n\r\n\tinsertBlock(element: string): void {\r\n\t\tconst inner = new DOMParser().parseFromString(new TemplateGen(buttonBlockTemplate).generateTemplate(this.params), \"text/html\").getElementsByTagName(\"button\")[0]; //this.element;\r\n\t\tconst wrapper = document.querySelector(element);\r\n\t\tif (!inner || !wrapper) return;\r\n\t\tinner.addEventListener('click', this.params.onClick);\r\n\t\twrapper.appendChild(inner);\r\n\t}\r\n}","//Страница регистрации\r\n\r\nimport TemplateGen from '../utilities/TemplateGen'\r\nimport Form, { FormParams, onSubmitForm }  from '../elements/form-block'\r\nimport Input, { InputParams }  from '../elements/input-block'\r\nimport Button, { ButtonParams }  from '../elements/button-block'\r\n\r\nconst registrationForm: FormParams = {\r\n\ttitle: 'Регистрация',\r\n\terrorInfo: '',\r\n}\r\n\r\nconst registrationInputs: InputParams[] = [\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'login',\r\n\t\tname: 'login',\r\n\t\tlabel: 'Логин',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\terrorText: '',\r\n\t\terrorHightlightClass: '', //error-input\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'password',\r\n\t\tname: 'password',\r\n\t\tlabel: 'Пароль',\r\n\t\tvalue: '',\r\n\t\ttype: 'password',\r\n\t\terrorText: '',\r\n\t\terrorHightlightClass: '',\r\n\t},\r\n];\r\n\r\nconst registrationButtons: ButtonParams[] = [\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Зарегистрироваться',\r\n\t\tclasses: 'add-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tonSubmitForm();\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Назад',\r\n\t\tclasses: 'reg-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tconsole.log(99)\r\n\t\t},\r\n\t},\r\n]\r\n\r\nexport default function(): void {\r\n\r\n\tconst appBlock = document.getElementById(\"app\");\r\n\tnew Form(registrationForm).insertBlock(\"#app\");\r\n\r\n\tregistrationInputs.forEach(function(input) {\r\n\t\tnew Input(input).insertBlock(input.element);\r\n\t});\r\n\r\n\tregistrationButtons.forEach(function(button) {\r\n\t\tnew Button(button).insertBlock(button.element);\r\n\t});\r\n}","//Страница авторизации\r\n\r\nimport TemplateGen from '../utilities/TemplateGen'\r\nimport Form, { FormParams, onSubmitForm }  from '../elements/form-block'\r\nimport Input, { InputParams }  from '../elements/input-block'\r\nimport Button, { ButtonParams }  from '../elements/button-block'\r\nimport registration from './registration'\r\n\r\nconst authorizationForm: FormParams = {\r\n\ttitle: 'Вход',\r\n\terrorInfo: '',\r\n}\r\n\r\nconst authorizationInputs: InputParams[] = [\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'login',\r\n\t\tname: 'login',\r\n\t\tlabel: 'Логин',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\terrorText: '',\r\n\t\terrorHightlightClass: '', //error-input\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'password',\r\n\t\tname: 'password',\r\n\t\tlabel: 'Пароль',\r\n\t\tvalue: '',\r\n\t\ttype: 'password',\r\n\t\terrorText: '',\r\n\t\terrorHightlightClass: '',\r\n\t},\r\n];\r\n\r\nconst authorizationButtons: ButtonParams[] = [\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Авторизоваться',\r\n\t\tclasses: 'add-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tonSubmitForm();\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Зарегистрироваться',\r\n\t\tclasses: 'reg-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tregistration();\r\n\t\t},\r\n\t},\r\n]\r\n\r\nexport default function(): void {\r\n\r\n\tconst appBlock = document.getElementById(\"app\");\r\n\tnew Form(authorizationForm).insertBlock(\"#app\");\r\n\r\n\tauthorizationInputs.forEach(function(input) {\r\n\t\tnew Input(input).insertBlock(input.element);\r\n\t});\r\n\r\n\tauthorizationButtons.forEach(function(button) {\r\n\t\tnew Button(button).insertBlock(button.element);\r\n\t});\r\n}","import './scss/init.scss';\r\nimport authorization from './pages/authorization'\r\n\r\nfunction ready() {\r\n    console.log('DOM готов');\r\n    authorization();\r\n\r\n    /*let regButton: any = document.getElementById(\"regButton\");\r\n    console.log(regButton);\r\n    if (regButton){\r\n\t\tregButton.addEventListener(\"click\", function(){\r\n\t\t\tconsole.log(regButton);\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}*/\r\n\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", ready);"],"names":["$973bede13e903614$export$2e2bcd8739ae039","TEMPLATE_REGULAR","templateBlock","constructor","this","generateTemplate","template","changeTemplateKeys","tmp","templateRegular","templateKeys","exec","templateKey","key","replace","$ae202c0a4cbfb8e0$var$formBlockTemplate","params","render","insertBlock","element","inner","DOMParser","parseFromString","getElementsByTagName","wrapper","document","querySelector","appendChild","$ae202c0a4cbfb8e0$export$163d82ae5407ed7c","form","console","log","$002a4a3e1848043a$var$inputBlockTemplate","$002a4a3e1848043a$export$2e2bcd8739ae039","input","addEventListener","classList","add","$7754adb433268645$var$buttonBlockTemplate","$7754adb433268645$export$2e2bcd8739ae039","onClick","$e7d9c4fff4870b96$var$registrationForm","title","errorInfo","$e7d9c4fff4870b96$var$registrationInputs","id","name","label","value","type","errorText","errorHightlightClass","$e7d9c4fff4870b96$var$registrationButtons","classes","event","preventDefault","$91695f1c427861cf$var$authorizationForm","$91695f1c427861cf$var$authorizationInputs","$91695f1c427861cf$var$authorizationButtons","getElementById","$ae202c0a4cbfb8e0$export$2e2bcd8739ae039","forEach","button"],"version":3,"file":"index.5be050f2.js.map","sourceRoot":"../"}