{"mappings":"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","sources":["src/utilities/TemplateGen.ts","src/utilities/validation.ts","src/elements/form-block.ts","src/elements/input-block.ts","src/elements/button-block.ts","src/elements/image-input-block.ts","src/pages/profile.ts","src/pages/authorization.ts","src/main.ts"],"sourcesContent":["//Генератор шаблонов\r\n//На вход подаётся строка с макросами в скобках {{}} и объект со значениями макросов\r\n//Пример:\r\n/*\r\n\tСтрока: '<div class=\"{{className}}\"></div>'\r\n\tОбъект: {className: 'test-class'}\r\n*/\r\n\r\nexport default class TemplateGen {\r\n\r\n\treadonly TEMPLATE_REGULAR = /\\{\\{(.*?)\\}\\}/;\r\n\r\n\treadonly templateBlock: string = \"\";\r\n\r\n\tconstructor(templateBlock: string) {\r\n\t\tthis.templateBlock = templateBlock\r\n\t}\r\n\r\n\tgenerateTemplate(template: Record<string, unknown>): string {\r\n\t\tif (template && this.templateBlock){\r\n\t\t\treturn this.changeTemplateKeys(template, this.templateBlock, this.TEMPLATE_REGULAR);\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tchangeTemplateKeys(template, tmp, templateRegular): string {\r\n\t\tlet templateKeys = templateRegular.exec(tmp);\r\n\t\tif (templateKeys && templateKeys[1]){\r\n\t\t\tconst templateKey = templateKeys[1];\r\n\t\t\tfor (let key in template) {\r\n\t\t\t\tif (key == templateKeys[1]){\r\n\t\t\t\t\tlet templateValue = template[templateKey];\r\n\t\t\t\t\tif ((typeof templateValue != \"object\") && (typeof templateValue != \"function\")){\r\n\t\t\t\t\t\ttmp = tmp.replace(templateKeys[0], templateValue.toString());\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t\tif (templateRegular.exec(tmp)){\r\n\t\t\treturn this.changeTemplateKeys(template, tmp, templateRegular);\r\n\t\t} else {\r\n\t\t\treturn tmp;\r\n\t\t}\r\n\t}\r\n}","//Валидация\r\n\r\nconst defaultValidationErrorMessage = \"Возникла ошибка при заполнении формы. Пожалуйста, проверьте введённые данные.\";\r\nconst repeatPasswordErrorMessage = \"Пароли не совпадают.\";\r\nconst requiredFieldsErrorMessage = \"Не все обязательные поля заполнены.\";\r\n\r\nconst validationRegex: Record<string, RegExp> = {\r\n\temail: new RegExp(/^([A-Za-z0-9_\\.-]+)@([A-Za-z0-9_\\.-]+)\\.([a-z\\.]{2,6})$/),\r\n\tlogin: new RegExp(/^[A-Za-z0-9_\\.-]{3,20}$/),\r\n\tname: new RegExp(/^[A-ZА-Я][a-zA-Zа-яА-Я-]+$/),\r\n\tphone: new RegExp(/^\\+?\\d{10,15}$/),\r\n\tpassword: new RegExp(/^((?=.*?[A-Z])(?=.*?[0-9])\\S{8,40})\\S$/),\r\n};\r\n\r\nexport const validValue = function(input: HTMLInputElement): boolean {\r\n\tconst validationType = input.getAttribute(\"data-validation-type\");\r\n\tconst errorText = input.getAttribute(\"data-error-text\");\r\n\r\n\tconst value = input.value;\r\n\tconst regex = validationRegex[validationType];\r\n\r\n\tconst inputWrapper = input.parentElement;\r\n\tconst errorBlock = inputWrapper.querySelector(\".error-text-block\");\r\n\r\n\tif (regex && !regex.test(value)) {\r\n\t\tinputWrapper.classList.add('error-input');\r\n\t\tif (errorBlock){\r\n\t\t\tif (errorText){\r\n\t\t\t\terrorBlock.textContent = errorText;\r\n\t\t\t} else {\r\n\t\t\t\terrorBlock.textContent = defaultValidationErrorMessage;\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t\treturn false;\r\n\t}\r\n\tinputWrapper.classList.remove('error-input');\r\n\tif (errorBlock){\r\n\t\terrorBlock.textContent = \"\";\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nexport const validForm = function(form: HTMLFormElement): boolean {\r\n\tconst inputs = form.querySelectorAll('input');\r\n\tconst infoBlock = form.querySelector(\".info-block\");\r\n\r\n\tlet isFormValid = true;\r\n\tlet password = \"\", repeatPassword = \"\";\r\n\r\n\tinfoBlock.textContent = \"\";\r\n\r\n\tinputs.forEach(function(input) {\r\n\t\t\r\n\t\tif (!validValue(input)) {\r\n\t\t\tisFormValid = false;\r\n\t\t}\r\n\t\tif (!input.value && input.getAttribute(\"data-required\")){\r\n\t\t\tisFormValid = false;\r\n\t\t\tinfoBlock.textContent = requiredFieldsErrorMessage;\r\n\t\t}\r\n\t\tif (input.name == \"password\"){\r\n\t\t\tpassword = input.value;\r\n\t\t}\r\n\t\tif (input.name == \"repeat_password\"){\r\n\t\t\trepeatPassword = input.value;\r\n\t\t}\r\n\t});\r\n\t\r\n\tif (password && repeatPassword && (password != repeatPassword)){\r\n\t\tisFormValid = false;\r\n\t\tinfoBlock.textContent = repeatPasswordErrorMessage;\r\n\t}\t\r\n\treturn isFormValid;\r\n}","//Блок input\r\n\r\nimport TemplateGen from '../utilities/TemplateGen';\r\nimport {validForm} from \"../utilities/validation\";\r\n\r\nconst formBlockTemplate = `\r\n\t<div class=\"reg-form-page\">\r\n\t\t<div class=\"reg-form-wrapper\">\r\n\t\t\t<h2>{{title}}</h2>\r\n\t\t\t<form class=\"reg-form\">\r\n\t\t\t\t<fieldset>\r\n\t\t\t\t\t<div class=\"reg-form-fieldset\"></div>\r\n\t\t\t\t\t<div class=\"form-block info-block\"></div>\r\n\t\t\t\t\t<div class=\"form-block buttons-wrapper\"></div>\r\n\t\t\t\t</fieldset>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t</div>`;\r\n\r\nexport type FormParams = {\r\n\ttitle: string\r\n};\r\n\r\nexport default class Form /*extends Block*/ {\r\n\tparams: FormParams\r\n\r\n\tconstructor(params: FormParams) {\r\n\t\tthis.params = params;\r\n\t\t//super('button', props, props.className)\r\n\t}\r\n\r\n\trender(): string {\r\n\t\treturn new TemplateGen(formBlockTemplate).generateTemplate(this.params);\r\n\t}\r\n\r\n\tinsertBlock(element: string, clean: boolean): void {\r\n\t\tconst inner = new DOMParser().parseFromString(new TemplateGen(formBlockTemplate).generateTemplate(this.params), \"text/html\").getElementsByTagName(\"div\")[0]; //this.element;\r\n\t\tconst wrapper = document.querySelector(element);\r\n\t\tif (!inner || !wrapper) return;\r\n\t\tfor (let key in this.params){\r\n\t\t\tif (!this.params[key]){\r\n\t\t\t\tinner.removeAttribute(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (clean){\r\n\t\t\twrapper.innerHTML = \"\";\r\n\t\t}\r\n\t\twrapper.appendChild(inner);\r\n\t}\r\n}\r\n\r\nexport function onSubmitForm(): void {\r\n\tconst form: HTMLFormElement  = document.querySelector('.reg-form');\r\n\tconsole.log(form);\r\n\tif (!form) return\r\n\r\n\tif (validForm(form)){\r\n\t\tconst data: FormData = new FormData(form);\r\n\t\tconsole.log(...data);\r\n\t}\r\n\treturn;\r\n}","//Блок input\r\n\r\nimport TemplateGen from '../utilities/TemplateGen';\r\nimport {validValue} from \"../utilities/validation\";\r\n\r\nconst inputBlockTemplate = `\r\n\t<div class=\"form-block {{classList}}\">\r\n\t\t<label class=\"form-label\" for=\"{{id}}\">{{label}}</label>\r\n\t\t<div class=\"input-wrapper\">\r\n\t\t\t<input class=\"form-control input-styles\" data-required=\"{{required}}\" data-error-text=\"{{errorText}}\" data-validation-type=\"{{validationType}}\" id=\"{{id}}\" type=\"{{type}}\" value=\"{{value}}\" name=\"{{name}}\">\r\n\t\t\t<div class=\"error-text-block\"></div>\r\n\t\t</div>\r\n\t</div>`;\r\n\r\nexport type InputParams = {\r\n\telement: string,\r\n\tid: string,\r\n\tlabel: string,\r\n\tvalue: string,\r\n\ttype: string,\r\n\tname: string,\r\n\trequired: boolean,\r\n\terrorText: string,\r\n\tvalidationType: string,\r\n\tclassList: string,\r\n}\r\n\r\nexport default class Input /*extends Block*/ {\r\n\tparams: InputParams\r\n\r\n\tconstructor(params: InputParams) {\r\n\t\tthis.params = params;\r\n\t\t//super('button', props, props.className)\r\n\t}\r\n\r\n\trender(): string {\r\n\t\treturn new TemplateGen(inputBlockTemplate).generateTemplate(this.params);\r\n\t}\r\n\r\n\tinsertBlock(element: string, clean: boolean): void {\r\n\t\tconst inner = new DOMParser().parseFromString(new TemplateGen(inputBlockTemplate).generateTemplate(this.params), \"text/html\").getElementsByTagName(\"div\")[0]; //this.element;\r\n\t\tconst wrapper = document.querySelector(element);\r\n\t\tif (!inner || !wrapper) return;\r\n\t\tfor (let key in this.params){\r\n\t\t\tif (!this.params[key]){\r\n\t\t\t\tinner.removeAttribute(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (clean){\r\n\t\t\twrapper.innerHTML = \"\";\r\n\t\t}\r\n\t\tlet input = inner.querySelector('input')\r\n\t\tinput.addEventListener('focus', function(){\r\n\t\t\tinput.classList.add('focus-input');\r\n\t\t});\r\n\t\tinput.addEventListener('blur', function(){\r\n\t\t\tinput.classList.remove('focus-input');\r\n\t\t\tvalidValue(input);\r\n\t\t});\r\n\t\twrapper.appendChild(inner);\r\n\t}\r\n}","//Блок кнопки\r\n\r\nimport TemplateGen from '../utilities/TemplateGen';\r\n\r\nconst buttonBlockTemplate = `<button id=\"{{id}}\" class=\"button-link {{classes}}\">{{name}}</button>`;\r\n\r\nexport type ButtonParams = {\r\n\telement: string,\r\n\tid: string,\r\n\tclasses: string,\r\n\tname: string,\r\n\tonClick: (event: Event) => void\r\n}\r\n\r\nexport default class Button /*extends Block*/ {\r\n\tparams: ButtonParams\r\n\r\n\tconstructor(params: ButtonParams) {\r\n\t\tthis.params = params;\r\n\t\t//super('button', props, props.className)\r\n\t}\r\n\r\n\trender(): string {\r\n\t\treturn new TemplateGen(buttonBlockTemplate).generateTemplate(this.params);\r\n\t}\r\n\r\n\tinsertBlock(element: string, clean: boolean): void {\r\n\t\tconst inner = new DOMParser().parseFromString(new TemplateGen(buttonBlockTemplate).generateTemplate(this.params), \"text/html\").getElementsByTagName(\"button\")[0]; //this.element;\r\n\t\tconst wrapper = document.querySelector(element);\r\n\t\tif (!inner || !wrapper) return;\r\n\t\tfor (let key in this.params){\r\n\t\t\tif (!this.params[key]){\r\n\t\t\t\tinner.removeAttribute(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (clean){\r\n\t\t\twrapper.innerHTML = \"\";\r\n\t\t}\r\n\t\tinner.addEventListener('click', this.params.onClick);\r\n\t\twrapper.appendChild(inner);\r\n\t}\r\n}","//Блок загрузки изображения\r\n\r\nimport TemplateGen from '../utilities/TemplateGen';\r\n\r\nconst inputImageTemplate = `\r\n\t<label class=\"image-form-block\" for=\"{{id}}\">\r\n\t\t<input class=\"load-image\" hidden accept=\"image/*\" type=\"file\" id=\"{{id}}\">\r\n\t\t<img id=\"{{id}}\" src=\"{{imageLink}}\" alt=\"{{imageAlt}}\" title=\"{{imageTitle}}\">\r\n\t</label>`;\r\n\r\nexport type InputImageParams = {\r\n\telement: string,\r\n\tid: string,\r\n\timageLink: string,\r\n\timageAlt: string,\r\n\timageTitle: string,\r\n}\r\n\r\nexport default class ImageInput /*extends Block*/ {\r\n\tparams: InputImageParams\r\n\r\n\tconstructor(params: InputImageParams) {\r\n\t\tthis.params = params;\r\n\t\t//super('button', props, props.className)\r\n\t}\r\n\r\n\trender(): string {\r\n\t\treturn new TemplateGen(inputImageTemplate).generateTemplate(this.params);\r\n\t}\r\n\r\n\tinsertBlock(element: string, clean: boolean): void {\r\n\t\tconst inner = new DOMParser().parseFromString(new TemplateGen(inputImageTemplate).generateTemplate(this.params), \"text/html\").getElementsByTagName(\"label\")[0]; //this.element;\r\n\t\tconst wrapper = document.querySelector(element);\r\n\t\tif (!inner || !wrapper) return;\r\n\t\tfor (let key in this.params){\r\n\t\t\tif (!this.params[key]){\r\n\t\t\t\tinner.removeAttribute(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (clean){\r\n\t\t\twrapper.innerHTML = \"\";\r\n\t\t}\r\n\t\twrapper.appendChild(inner);\r\n\t}\r\n}","//Страница профиля\r\n\r\nimport TemplateGen from '../utilities/TemplateGen';\r\nimport Form, { FormParams, onSubmitForm }  from '../elements/form-block';\r\nimport Input, { InputParams }  from '../elements/input-block';\r\nimport Button, { ButtonParams }  from '../elements/button-block';\r\nimport ImageInput, { InputImageParams }  from '../elements/image-input-block';\r\nimport authorization from './authorization';\r\n\r\nconst profileForm: FormParams = {\r\n\ttitle: ''\r\n};\r\n\r\nconst profileImageInputs: InputImageParams[] = [\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'photoImageUpload',\r\n\t\timageLink: '#',\r\n\t\timageAlt: '',\r\n\t\timageTitle: '',\r\n\t}\r\n];\r\n\r\nconst profileInputs: InputParams[] = [\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'email',\r\n\t\tname: 'email',\r\n\t\tlabel: 'E-mail',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: 'Неверный формат email',\r\n\t\tvalidationType: 'email',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'login',\r\n\t\tname: 'login',\r\n\t\tlabel: 'Логин',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: 'Логин должен содержать от 3 до 20 латинских символов, может содержать цифры, но не состоять из них, без пробелов, без спецсимволов',\r\n\t\tvalidationType: 'login',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'secondName',\r\n\t\tname: 'second_name',\r\n\t\tlabel: 'Фамилия',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: 'Первая буква должна быть заглавной, без пробелов, цифр и спецсимволов, кроме дефиса',\r\n\t\tvalidationType: 'name',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'firstName',\r\n\t\tname: 'first_name',\r\n\t\tlabel: 'Имя',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: 'Первая буква должна быть заглавной, без пробелов, цифр и спецсимволов, кроме дефиса',\r\n\t\tvalidationType: 'name',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'phone',\r\n\t\tname: 'phone',\r\n\t\tlabel: 'Телефон',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: 'Телефон должен содержать от 10 до 15 символов, состоит из цифр, может начинаться с плюса',\r\n\t\tvalidationType: 'phone',\r\n\t\tclassList: '',\r\n\t},\r\n];\r\n\r\nconst changePasswordButtons: ButtonParams[] = [\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'changePasswordButton',\r\n\t\tname: 'Изменить пароль',\r\n\t\tclasses: 'reg-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tconsole.log(event.target.getAttribute('id'));\r\n\t\t\t//authorization(); //Переход на страницу чата\r\n\t\t},\r\n\t},\r\n];\r\n\r\nconst changePasswordInputs: InputParams[] = [\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'oldPassword',\r\n\t\tname: 'old_password',\r\n\t\tlabel: 'Старый пароль',\r\n\t\tvalue: '',\r\n\t\ttype: 'password',\r\n\t\trequired: true,\r\n\t\terrorText: 'Пароль должен содержать от 8 до 40 символов, обязательно хотя бы одну заглавную букву и цифру',\r\n\t\tvalidationType: 'password',\r\n\t\tclassList: 'none-block',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'password',\r\n\t\tname: 'password',\r\n\t\tlabel: 'Пароль',\r\n\t\tvalue: '',\r\n\t\ttype: 'password',\r\n\t\trequired: true,\r\n\t\terrorText: 'Пароль должен содержать от 8 до 40 символов, обязательно хотя бы одну заглавную букву и цифру',\r\n\t\tvalidationType: 'password',\r\n\t\tclassList: 'none-block',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'repeatPassword',\r\n\t\tname: 'repeat_password',\r\n\t\tlabel: 'Повторите пароль',\r\n\t\tvalue: '',\r\n\t\ttype: 'password',\r\n\t\trequired: true,\r\n\t\terrorText: 'Пароль должен содержать от 8 до 40 символов, обязательно хотя бы одну заглавную букву и цифру',\r\n\t\tvalidationType: 'password',\r\n\t\tclassList: 'none-block',\r\n\t},\r\n];\r\n\r\nconst profileButtons: ButtonParams[] = [\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Изменить данные',\r\n\t\tclasses: 'add-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tonSubmitForm();\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Назад',\r\n\t\tclasses: 'reg-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\t//Переход на страницу чата\r\n\t\t},\r\n\t},\r\n]\r\n\r\nexport default function(): void {\r\n\r\n\tnew Form(profileForm).insertBlock(\"#app\", true);\r\n\r\n\tprofileImageInputs.forEach(function(imageInput) {\r\n\t\tnew ImageInput(imageInput).insertBlock(imageInput.element);\r\n\t});\r\n\r\n\tprofileInputs.forEach(function(input) {\r\n\t\tnew Input(input).insertBlock(input.element);\r\n\t});\r\n\r\n\tchangePasswordButtons.forEach(function(button) {\r\n\t\tnew Button(button).insertBlock(button.element);\r\n\t});\r\n\r\n\tchangePasswordInputs.forEach(function(input) {\r\n\t\tnew Input(input).insertBlock(input.element);\r\n\t});\r\n\r\n\tprofileButtons.forEach(function(button) {\r\n\t\tnew Button(button).insertBlock(button.element);\r\n\t});\r\n}","//Страница авторизации\r\n\r\nimport TemplateGen from '../utilities/TemplateGen';\r\nimport Form, { FormParams, onSubmitForm }  from '../elements/form-block';\r\nimport Input, { InputParams }  from '../elements/input-block';\r\nimport Button, { ButtonParams }  from '../elements/button-block';\r\nimport registration from './registration';\r\n\r\nimport profile from './profile';\r\n\r\nconst authorizationForm: FormParams = {\r\n\ttitle: 'Вход',\r\n}\r\n\r\nconst authorizationInputs: InputParams[] = [\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'login',\r\n\t\tname: 'login',\r\n\t\tlabel: 'Логин',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: '',\r\n\t\tvalidationType: '',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'password',\r\n\t\tname: 'password',\r\n\t\tlabel: 'Пароль',\r\n\t\tvalue: '',\r\n\t\ttype: 'password',\r\n\t\trequired: true,\r\n\t\terrorText: '',\r\n\t\tvalidationType: '',\r\n\t\tclassList: '',\r\n\t},\r\n];\r\n\r\nconst authorizationButtons: ButtonParams[] = [\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Авторизоваться',\r\n\t\tclasses: 'add-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tonSubmitForm();\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Зарегистрироваться',\r\n\t\tclasses: 'reg-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\t//registration();\r\n\t\t\tprofile();\r\n\t\t},\r\n\t},\r\n]\r\n\r\nexport default function(): void {\r\n\r\n\tnew Form(authorizationForm).insertBlock(\"#app\", true);\r\n\r\n\tauthorizationInputs.forEach(function(input) {\r\n\t\tnew Input(input).insertBlock(input.element);\r\n\t});\r\n\r\n\tauthorizationButtons.forEach(function(button) {\r\n\t\tnew Button(button).insertBlock(button.element);\r\n\t});\r\n}","import './scss/init.scss';\r\nimport authorization from './pages/authorization';\r\n\r\nfunction ready() {\r\n\tauthorization();\r\n\r\n\t/*let regButton: any = document.getElementById(\"regButton\");\r\n\tconsole.log(regButton);\r\n\tif (regButton){\r\n\t\tregButton.addEventListener(\"click\", function(){\r\n\t\t\tconsole.log(regButton);\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}*/\r\n\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", ready);"],"names":["$973bede13e903614$export$2e2bcd8739ae039","TEMPLATE_REGULAR","templateBlock","constructor","this","generateTemplate","template","changeTemplateKeys","tmp","templateRegular","templateKeys","exec","templateKey","key","templateValue","replace","toString","$ee188ca8cb13b1d3$var$validationRegex","email","RegExp","login","name","phone","password","$ee188ca8cb13b1d3$export$5ca26c99531348ec","input","validationType","getAttribute","errorText","value","regex","inputWrapper","parentElement","errorBlock","querySelector","test","classList","add","textContent","remove","$ae202c0a4cbfb8e0$var$formBlockTemplate","params","render","insertBlock","element","clean","inner","DOMParser","parseFromString","getElementsByTagName","wrapper","document","removeAttribute","innerHTML","appendChild","form","inputs","querySelectorAll","infoBlock","isFormValid","repeatPassword","forEach","$002a4a3e1848043a$var$inputBlockTemplate","$002a4a3e1848043a$export$2e2bcd8739ae039","addEventListener","$7754adb433268645$var$buttonBlockTemplate","$7754adb433268645$export$2e2bcd8739ae039","onClick","$87a085c262289cfb$var$inputImageTemplate","$87a085c262289cfb$export$2e2bcd8739ae039","$7e7fecefb4a4129d$var$profileForm","title","$7e7fecefb4a4129d$var$profileImageInputs","id","imageLink","imageAlt","imageTitle","$7e7fecefb4a4129d$var$profileInputs","label","type","required","$7e7fecefb4a4129d$var$changePasswordButtons","classes","event","preventDefault","console","log","target","$7e7fecefb4a4129d$var$changePasswordInputs","$7e7fecefb4a4129d$var$profileButtons","$ae202c0a4cbfb8e0$export$163d82ae5407ed7c","$91695f1c427861cf$var$authorizationForm","$91695f1c427861cf$var$authorizationInputs","$91695f1c427861cf$var$authorizationButtons","$ae202c0a4cbfb8e0$export$2e2bcd8739ae039","imageInput","button"],"version":3,"file":"index.2eaeac56.js.map","sourceRoot":"../"}