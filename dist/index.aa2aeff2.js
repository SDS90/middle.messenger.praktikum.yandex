(()=>{class e{TEMPLATE_REGULAR=/\{\{(.*?)\}\}/;templateBlock="";constructor(e){this.templateBlock=e}generateTemplate(e){return e&&this.templateBlock?this.changeTemplateKeys(e,this.templateBlock,this.TEMPLATE_REGULAR):""}changeTemplateKeys(e,t,n){let r=n.exec(t);if(r&&r[1]){const n=r[1];for(let a in e)a==r[1]&&"string"==typeof e[n]&&(t=t.replace(r[0],e[n]))}return n.exec(t)?this.changeTemplateKeys(e,t,n):t}}const t={email:new RegExp(/^([A-Za-z0-9_\.-]+)@([A-Za-z0-9_\.-]+)\.([a-z\.]{2,6})$/),login:new RegExp(/^[A-Za-z0-9_\.-]{3,20}$/),name:new RegExp(/^[A-ZА-Я][a-zA-Zа-яА-Я-]+$/),phone:new RegExp(/^\+?\d{10,15}$/),password:new RegExp(/^((?=.*?[A-Z])(?=.*?[0-9])\S{8,40})\S$/)},n=function(e){const n=e.getAttribute("data-validation-type"),r=e.getAttribute("data-error-text"),a=e.value,l=t[n],o=e.parentElement,s=o.querySelector(".error-text-block");return l&&!l.test(a)?(o.classList.add("error-input"),s&&(s.textContent=r||"Возникла ошибка при заполнении формы. Пожалуйста, проверьте введённые данные."),!1):(o.classList.remove("error-input"),s&&(s.textContent=""),!0)},r=function(e){const t=form.querySelectorAll("input");let r=!0;return t.forEach((function(e){console.log(e),n(e)||(r=!1)})),r},a='\n\t<div class="reg-form-page">\n\t\t<div class="reg-form-wrapper">\n\t\t\t<h2>{{title}}</h2>\n\t\t\t<form class="reg-form">\n\t\t\t\t<fieldset>\n\t\t\t\t\t<div class="reg-form-fieldset"></div>\n\t\t\t\t\t<div class="form-block info-block">{{errorInfo}}</div>\n\t\t\t\t\t<div class="form-block buttons-wrapper"></div>\n\t\t\t\t</fieldset>\n\t\t\t</form>\n\t\t</div>\n\t</div>';class l{constructor(e){this.params=e}render(){return new e(a).generateTemplate(this.params)}insertBlock(t,n){const r=(new DOMParser).parseFromString(new e(a).generateTemplate(this.params),"text/html").getElementsByTagName("div")[0],l=document.querySelector(t);r&&l&&(n&&(l.innerHTML=""),l.appendChild(r))}}function o(){const e=document.querySelector(".reg-form");if(console.log(e),e&&r()){const t=new FormData(e);console.log(...t)}}const s='\n\t<div class="form-block">\n\t\t<label class="form-label" for="{{id}}">{{label}}</label>\n\t\t<div class="input-wrapper">\n\t\t\t<input class="form-control input-styles" data-error-text="{{errorText}}" data-validation-type="{{validationType}}" id="{{id}}" type="{{type}}" value="{{value}}" name="{{name}}">\n\t\t\t<div class="error-text-block"></div>\n\t\t</div>\n\t</div>';class i{constructor(e){this.params=e}render(){return new e(s).generateTemplate(this.params)}insertBlock(t){const r=(new DOMParser).parseFromString(new e(s).generateTemplate(this.params),"text/html").getElementsByTagName("div")[0],a=document.querySelector(t);if(!r||!a)return;let l=r.querySelector("input");l.addEventListener("focus",(function(){l.classList.add("focus-input")})),l.addEventListener("blur",(function(){l.classList.remove("focus-input"),n(l)})),a.appendChild(r)}}const c='<button class="button-link {{classes}}">{{name}}</button>';class p{constructor(e){this.params=e}render(){return new e(c).generateTemplate(this.params)}insertBlock(t){const n=(new DOMParser).parseFromString(new e(c).generateTemplate(this.params),"text/html").getElementsByTagName("button")[0],r=document.querySelector(t);n&&r&&(n.addEventListener("click",this.params.onClick),r.appendChild(n))}}const d={title:"Регистрация",errorInfo:""},m=[{element:".reg-form-fieldset",id:"email",name:"email",label:"E-mail",value:"",type:"text",errorText:"Неверный формат email",validationType:"email"},{element:".reg-form-fieldset",id:"login",name:"login",label:"Логин",value:"",type:"text",errorText:"Логин должен содержать от 3 до 20 латинских символов, может содержать цифры, но не состоять из них, без пробелов, без спецсимволов",validationType:"login"},{element:".reg-form-fieldset",id:"password",name:"password",label:"Пароль",value:"",type:"password",errorText:"Пароль должен содержать от 8 до 40 символов, обязательно хотя бы одну заглавную букву и цифру",validationType:"password"},{element:".reg-form-fieldset",id:"repeatPassword",name:"repeat_password",label:"Повторите пароль",value:"",type:"password",errorText:"Пароль должен содержать от 8 до 40 символов, обязательно хотя бы одну заглавную букву и цифру",validationType:"password"}],u=[{element:".buttons-wrapper",id:"",name:"Зарегистрироваться",classes:"add-link",onClick:e=>{e.preventDefault(),o()}},{element:".buttons-wrapper",id:"",name:"Назад",classes:"reg-link",onClick:e=>{e.preventDefault(),w()}}];const f={title:"Вход",errorInfo:""},g=[{element:".reg-form-fieldset",id:"login",name:"login",label:"Логин",value:"",type:"text",errorText:"",validationType:""},{element:".reg-form-fieldset",id:"password",name:"password",label:"Пароль",value:"",type:"password",errorText:"",validationType:""}],v=[{element:".buttons-wrapper",id:"",name:"Авторизоваться",classes:"add-link",onClick:e=>{e.preventDefault(),o()}},{element:".buttons-wrapper",id:"",name:"Зарегистрироваться",classes:"reg-link",onClick:e=>{e.preventDefault(),new l(d).insertBlock("#app",!0),m.forEach((function(e){new i(e).insertBlock(e.element)})),u.forEach((function(e){new p(e).insertBlock(e.element)}))}}];function w(){new l(f).insertBlock("#app",!0),g.forEach((function(e){new i(e).insertBlock(e.element)})),v.forEach((function(e){new p(e).insertBlock(e.element)}))}document.addEventListener("DOMContentLoaded",(function(){w()}))})();
//# sourceMappingURL=index.aa2aeff2.js.map
