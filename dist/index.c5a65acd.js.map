{"mappings":"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","sources":["src/utilities/TemplateGen.ts","src/elements/block.ts","src/utilities/validation.ts","src/elements/form-block.ts","src/elements/input-block.ts","src/elements/button-block.ts","src/pages/registration.ts","src/elements/chat-wrapper.ts","src/pages/chat.ts","src/pages/authorization.ts","src/main.ts"],"sourcesContent":["//Генератор шаблонов\r\n//На вход подаётся строка с макросами в скобках {{}} и объект со значениями макросов\r\n//Пример:\r\n/*\r\n\tСтрока: '<div class=\"{{className}}\"></div>'\r\n\tОбъект: {className: 'test-class'}\r\n*/\r\n\r\nexport default class TemplateGen {\r\n\r\n\treadonly TEMPLATE_REGULAR = /\\{\\{(.*?)\\}\\}/;\r\n\r\n\treadonly templateBlock: string = \"\";\r\n\r\n\tconstructor(templateBlock: string) {\r\n\t\tthis.templateBlock = templateBlock\r\n\t}\r\n\r\n\tgenerateTemplate(template: Record<string, unknown>): string {\r\n\t\tif (template && this.templateBlock){\r\n\t\t\treturn this.changeTemplateKeys(template, this.templateBlock, this.TEMPLATE_REGULAR);\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tchangeTemplateKeys(template, tmp, templateRegular): string {\r\n\t\tlet templateKeys = templateRegular.exec(tmp);\r\n\t\tif (templateKeys && templateKeys[1]){\r\n\t\t\tconst templateKey = templateKeys[1];\r\n\t\t\tfor (let key in template) {\r\n\t\t\t\tif (key == templateKeys[1]){\r\n\t\t\t\t\tlet templateValue = template[templateKey];\r\n\t\t\t\t\tif ((typeof templateValue != \"object\") && (typeof templateValue != \"function\")){\r\n\t\t\t\t\t\ttemplateValue = templateValue.toString()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttemplateValue = \"\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttmp = tmp.replace(templateKeys[0], templateValue);\r\n\t\t\t\t}\r\n\t\t\t}\t\t\t\r\n\t\t}\r\n\t\tif (templateRegular.exec(tmp)){\r\n\t\t\treturn this.changeTemplateKeys(template, tmp, templateRegular);\r\n\t\t} else {\r\n\t\t\treturn tmp;\r\n\t\t}\r\n\t}\r\n}","//Блоки - общее\r\nimport TemplateGen from '../utilities/TemplateGen';\r\n\r\nexport default class Block {\r\n\tparams: Record<string, unknown>\r\n\ttemplate: string\r\n\tinsertedBlock: Record<string, unknown>\r\n\r\n\tconstructor(params: Record<string, unknown>, template: string) {\r\n\t\tthis.params = params;\r\n\t\tthis.template = template;\r\n\t}\r\n\r\n\trender(): string {\r\n\t\treturn new TemplateGen(this.template).generateTemplate(this.params);;\r\n\t}\r\n\r\n\tinsertBlock(element: string, clean: boolean): Record<string, HTMLElement> {\r\n\t\tconst inner = new DOMParser().parseFromString(new TemplateGen(this.template).generateTemplate(this.params), \"text/html\").getElementsByTagName(\"body\")[0].childNodes[0]; //this.element;\r\n\t\tconst wrapper = document.querySelector(element);\r\n\t\tif (!inner || !wrapper) return {};\r\n\t\tfor (let key in this.params){\r\n\t\t\tif (!this.params[key]){\r\n\t\t\t\tinner.removeAttribute(key);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (clean){\r\n\t\t\twrapper.innerHTML = \"\";\r\n\t\t}\r\n\t\treturn {\r\n\t\t\tinner: inner,\r\n\t\t\twrapper: wrapper\r\n\t\t}\r\n\t}\r\n}","//Валидация\r\n\r\nconst defaultValidationErrorMessage = \"Возникла ошибка при заполнении формы. Пожалуйста, проверьте введённые данные.\";\r\nconst repeatPasswordErrorMessage = \"Пароли не совпадают.\";\r\nconst requiredFieldsErrorMessage = \"Не все обязательные поля заполнены.\";\r\n\r\nconst validationRegex: Record<string, RegExp> = {\r\n\temail: new RegExp(/^([A-Za-z0-9_\\.-]+)@([A-Za-z0-9_\\.-]+)\\.([a-z\\.]{2,6})$/),\r\n\tlogin: new RegExp(/^[A-Za-z0-9_\\.-]{3,20}$/),\r\n\tname: new RegExp(/^[A-ZА-Я][a-zA-Zа-яА-Я-]+$/),\r\n\tphone: new RegExp(/^\\+?\\d{10,15}$/),\r\n\tpassword: new RegExp(/^((?=.*?[A-Z])(?=.*?[0-9])\\S{8,40})\\S$/),\r\n};\r\n\r\nexport const validValue = function(input: HTMLInputElement): boolean {\r\n\tconst validationType = input.getAttribute(\"data-validation-type\");\r\n\tconst errorText = input.getAttribute(\"data-error-text\");\r\n\r\n\tconst value = input.value;\r\n\tconst regex = validationRegex[validationType];\r\n\r\n\tconst inputWrapper = input.parentElement;\r\n\tconst errorBlock = inputWrapper.querySelector(\".error-text-block\");\r\n\r\n\tif (regex && !regex.test(value)) {\r\n\t\tinputWrapper.classList.add('error-input');\r\n\t\tif (errorBlock){\r\n\t\t\tif (errorText){\r\n\t\t\t\terrorBlock.textContent = errorText;\r\n\t\t\t} else {\r\n\t\t\t\terrorBlock.textContent = defaultValidationErrorMessage;\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t\treturn false;\r\n\t}\r\n\tinputWrapper.classList.remove('error-input');\r\n\tif (errorBlock){\r\n\t\terrorBlock.textContent = \"\";\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nexport const validForm = function(form: HTMLFormElement): boolean {\r\n\tconst formBlocks = form.querySelectorAll('.form-block');\r\n\tconst infoBlock = form.querySelector(\".info-block\");\r\n\r\n\tlet isFormValid = true;\r\n\tlet password = \"\", repeatPassword = \"\";\r\n\r\n\tinfoBlock.textContent = \"\";\r\n\r\n\tformBlocks.forEach(function(formBlock) {\r\n\t\tlet input = formBlock.querySelector(\"input\");\r\n\t\tif (input){\r\n\t\t\tif (!formBlock.classList.contains(\"none-block\") && !validValue(input)) {\r\n\t\t\t\tisFormValid = false;\r\n\t\t\t}\r\n\t\t\tif (!input.value && input.getAttribute(\"data-required\") && !formBlock.classList.contains(\"none-block\")){\r\n\t\t\t\tisFormValid = false;\r\n\t\t\t\tinfoBlock.textContent = requiredFieldsErrorMessage;\r\n\t\t\t}\r\n\t\t\tif (input.name == \"password\"){\r\n\t\t\t\tpassword = input.value;\r\n\t\t\t}\r\n\t\t\tif (input.name == \"repeat_password\"){\r\n\t\t\t\trepeatPassword = input.value;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\tif (password && repeatPassword && (password != repeatPassword)){\r\n\t\tisFormValid = false;\r\n\t\tinfoBlock.textContent = repeatPasswordErrorMessage;\r\n\t}\t\r\n\treturn isFormValid;\r\n}","//Блок input\r\n\r\nimport Block from '../elements/block';\r\nimport {validForm} from \"../utilities/validation\";\r\n\r\nconst formBlockTemplate = `\r\n\t<div class=\"reg-form-page\">\r\n\t\t<div class=\"reg-form-wrapper\">\r\n\t\t\t<h2>{{title}}</h2>\r\n\t\t\t<form class=\"reg-form\">\r\n\t\t\t\t<fieldset>\r\n\t\t\t\t\t<div class=\"reg-form-fieldset\"></div>\r\n\t\t\t\t\t<div class=\"form-block info-block\"></div>\r\n\t\t\t\t\t<div class=\"form-block buttons-wrapper\"></div>\r\n\t\t\t\t</fieldset>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t</div>`;\r\n\r\nexport type FormParams = {\r\n\ttitle: string\r\n};\r\n\r\nexport default class Form extends Block {\r\n\r\n\tconstructor(params: FormParams, template: string) {\r\n\t\tif (!template){\r\n\t\t\ttemplate = formBlockTemplate;\r\n\t\t}\r\n\t\tsuper(params, template);\r\n\t}\r\n\r\n\tinsertBlock(element: string, clean: boolean): Record<string, HTMLElement> {\r\n\t\tlet insertedBlock = super.insertBlock(element, clean);\r\n\t\tif (insertedBlock.inner && insertedBlock.wrapper){\r\n\t\t\tinsertedBlock.wrapper.appendChild(insertedBlock.inner);\r\n\t\t}\r\n\t\treturn insertedBlock;\r\n\t}\r\n}\r\n\r\nexport function onSubmitForm(callback): void {\r\n\tconst form: HTMLFormElement  = document.querySelector('.reg-form');\r\n\tif (!form) return\r\n\r\n\tif (validForm(form)){\r\n\t\tconst data: FormData = new FormData(form);\r\n\t\tconsole.log(...data);\r\n\t\tif (callback){\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\treturn;\r\n}","//Блок input\r\n\r\nimport Block from '../elements/block';\r\nimport {validValue} from \"../utilities/validation\";\r\n\r\nconst inputBlockTemplate = `\r\n\t<div class=\"form-block {{classList}}\">\r\n\t\t<label class=\"form-label\" for=\"{{id}}\">{{label}}</label>\r\n\t\t<div class=\"input-wrapper\">\r\n\t\t\t<input class=\"form-control input-styles\" data-required=\"{{required}}\" data-error-text=\"{{errorText}}\" data-validation-type=\"{{validationType}}\" id=\"{{id}}\" type=\"{{type}}\" value=\"{{value}}\" name=\"{{name}}\">\r\n\t\t\t<div class=\"error-text-block\"></div>\r\n\t\t</div>\r\n\t</div>`;\r\n\r\nexport type InputParams = {\r\n\telement: string,\r\n\tid: string,\r\n\tlabel: string,\r\n\tvalue: string,\r\n\ttype: string,\r\n\tname: string,\r\n\trequired: boolean,\r\n\terrorText: string,\r\n\tvalidationType: string,\r\n\tclassList: string,\r\n}\r\n\r\nexport default class Input extends Block {\r\n\t//params: InputParams\r\n\r\n\tconstructor(params: InputParams, template: string) {\r\n\t\tif (!template){\r\n\t\t\ttemplate = inputBlockTemplate;\r\n\t\t}\r\n\t\tsuper(params, template);\r\n\t}\r\n\r\n\tinsertBlock(element: string, clean: boolean): Record<string, HTMLElement> {\r\n\r\n\t\tlet insertedBlock = super.insertBlock(element, clean);\r\n\t\tif (insertedBlock.inner && insertedBlock.wrapper){\r\n\t\t\tlet inner = insertedBlock.inner;\r\n\t\t\tlet wrapper = insertedBlock.wrapper;\r\n\r\n\t\t\tlet input = inner.querySelector('input')\r\n\t\t\tinput.addEventListener('focus', function(){\r\n\t\t\t\tinput.classList.add('focus-input');\r\n\t\t\t});\r\n\t\t\tinput.addEventListener('blur', function(){\r\n\t\t\t\tinput.classList.remove('focus-input');\r\n\t\t\t\tvalidValue(input);\r\n\t\t\t});\r\n\t\t\twrapper.appendChild(inner);\r\n\t\t}\r\n\t\treturn insertedBlock;\r\n\t}\r\n}","//Блок кнопки\r\n\r\nimport Block from '../elements/block';\r\n\r\nconst buttonBlockTemplate = `<button id=\"{{id}}\" class=\"button-link {{classes}}\">{{name}}</button>`;\r\n\r\nexport type ButtonParams = {\r\n\telement: string,\r\n\tid: string,\r\n\tclasses: string,\r\n\tname: string,\r\n\tonClick: (event: Event) => void\r\n}\r\n\r\nexport default class Button extends Block {\r\n\r\n\tconstructor(params: ButtonParams, template: string) {\r\n\t\tif (!template){\r\n\t\t\ttemplate = buttonBlockTemplate;\r\n\t\t}\r\n\t\tsuper(params, template);\r\n\t}\r\n\r\n\tinsertBlock(element: string, clean: boolean): Record<string, HTMLElement> {\r\n\t\tlet insertedBlock = super.insertBlock(element, clean);\r\n\t\tif (insertedBlock.inner && insertedBlock.wrapper){\r\n\t\t\tlet inner = insertedBlock.inner;\r\n\t\t\tlet wrapper = insertedBlock.wrapper;\r\n\t\t\tinner.addEventListener('click', this.params.onClick);\r\n\t\t\twrapper.appendChild(inner);\r\n\t\t}\r\n\t\treturn insertedBlock;\r\n\t}\r\n}","//Страница регистрации\r\n\r\nimport TemplateGen from '../utilities/TemplateGen';\r\nimport Form, { FormParams, onSubmitForm }  from '../elements/form-block';\r\nimport Input, { InputParams }  from '../elements/input-block';\r\nimport Button, { ButtonParams }  from '../elements/button-block';\r\nimport authorization from './authorization';\r\n\r\nconst registrationForm: FormParams = {\r\n\ttitle: 'Регистрация'\r\n}\r\n\r\nconst registrationInputs: InputParams[] = [\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'email',\r\n\t\tname: 'email',\r\n\t\tlabel: 'E-mail',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: 'Неверный формат email',\r\n\t\tvalidationType: 'email',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'login',\r\n\t\tname: 'login',\r\n\t\tlabel: 'Логин',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: 'Логин должен содержать от 3 до 20 латинских символов, может содержать цифры, но не состоять из них, без пробелов, без спецсимволов',\r\n\t\tvalidationType: 'login',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'secondName',\r\n\t\tname: 'second_name',\r\n\t\tlabel: 'Фамилия',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: 'Первая буква должна быть заглавной, без пробелов, цифр и спецсимволов, кроме дефиса',\r\n\t\tvalidationType: 'name',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'firstName',\r\n\t\tname: 'first_name',\r\n\t\tlabel: 'Имя',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: 'Первая буква должна быть заглавной, без пробелов, цифр и спецсимволов, кроме дефиса',\r\n\t\tvalidationType: 'name',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'phone',\r\n\t\tname: 'phone',\r\n\t\tlabel: 'Телефон',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: 'Телефон должен содержать от 10 до 15 символов, состоит из цифр, может начинаться с плюса',\r\n\t\tvalidationType: 'phone',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'password',\r\n\t\tname: 'password',\r\n\t\tlabel: 'Пароль',\r\n\t\tvalue: '',\r\n\t\ttype: 'password',\r\n\t\trequired: true,\r\n\t\terrorText: 'Пароль должен содержать от 8 до 40 символов, обязательно хотя бы одну заглавную букву и цифру',\r\n\t\tvalidationType: 'password',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'repeatPassword',\r\n\t\tname: 'repeat_password',\r\n\t\tlabel: 'Повторите пароль',\r\n\t\tvalue: '',\r\n\t\ttype: 'password',\r\n\t\trequired: true,\r\n\t\terrorText: 'Пароль должен содержать от 8 до 40 символов, обязательно хотя бы одну заглавную букву и цифру',\r\n\t\tvalidationType: 'password',\r\n\t\tclassList: '',\r\n\t},\r\n];\r\n\r\nconst registrationButtons: ButtonParams[] = [\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Зарегистрироваться',\r\n\t\tclasses: 'add-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tonSubmitForm();\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Назад',\r\n\t\tclasses: 'reg-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tauthorization();\r\n\t\t},\r\n\t},\r\n]\r\n\r\nexport default function(): void {\r\n\r\n\tnew Form(registrationForm).insertBlock(\"#app\", true);\r\n\r\n\tregistrationInputs.forEach(function(input) {\r\n\t\tnew Input(input).insertBlock(input.element);\r\n\t});\r\n\r\n\tregistrationButtons.forEach(function(button) {\r\n\t\tnew Button(button).insertBlock(button.element);\r\n\t});\r\n}","//Блок чата (общий)\r\n\r\nimport Block from '../elements/block';\r\n\r\nconst chatWrapperTemplate = `\r\n\t<div class=\"chat-form-page clear\">\r\n\t\t<div class=\"chat-list-column\">\r\n\t\t\t<div class=\"profile-block clear\">\r\n\t\t\t\t<a class=\"create-chat-link\" href=\"error.html\">Создать чат</a>\r\n\t\t\t\t<a class=\"profile-link\" href=\"profile.html\">Мой профиль &gt;</a>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"chat-list\"></div>\r\n\t\t</div>\r\n\t\t<div class=\"chat-full-block\">\r\n\t\t\t<div class=\"chat-full-name\">{{chatUserName}}\r\n\t\t\t\t<a class=\"chat-back-button\" href=\"#\">Назад</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>`;\r\n\r\nexport type ChatParams = {\r\n\tchatUserName: string\r\n};\r\n\r\nexport default class Chat extends Block {\r\n\r\n\tconstructor(params: ChatParams, template: string) {\r\n\t\tif (!template){\r\n\t\t\ttemplate = chatWrapperTemplate;\r\n\t\t}\r\n\t\tsuper(params, template);\r\n\t}\r\n\r\n\tinsertBlock(element: string, clean: boolean): Record<string, HTMLElement> {\r\n\t\tlet insertedBlock = super.insertBlock(element, clean);\r\n\t\tif (insertedBlock.inner && insertedBlock.wrapper){\r\n\t\t\tinsertedBlock.wrapper.appendChild(insertedBlock.inner);\r\n\t\t}\r\n\t\treturn insertedBlock;\r\n\t}\r\n}","//Страница чата\r\n\r\nimport TemplateGen from '../utilities/TemplateGen';\r\nimport Form, { FormParams, onSubmitForm }  from '../elements/form-block';\r\nimport Input, { InputParams }  from '../elements/input-block';\r\nimport Button, { ButtonParams }  from '../elements/button-block';\r\nimport Link, { LinkParams }  from '../elements/link-block';\r\nimport Chat, { ChatParams }  from '../elements/chat-wrapper';\r\nimport registration from './registration';\r\n\r\nconst chatParams: ChatParams = {\r\n\tchatUserName: 'Андрей Андрейченков',\r\n}\r\n\r\nconst authorizationInputs: InputParams[] = [\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'login',\r\n\t\tname: 'login',\r\n\t\tlabel: 'Логин',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: '',\r\n\t\tvalidationType: '',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'password',\r\n\t\tname: 'password',\r\n\t\tlabel: 'Пароль',\r\n\t\tvalue: '',\r\n\t\ttype: 'password',\r\n\t\trequired: true,\r\n\t\terrorText: '',\r\n\t\tvalidationType: '',\r\n\t\tclassList: '',\r\n\t},\r\n];\r\n\r\nconst authorizationButtons: ButtonParams[] = [\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Авторизоваться',\r\n\t\tclasses: 'add-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tonSubmitForm();\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Зарегистрироваться',\r\n\t\tclasses: 'reg-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tregistration();\r\n\t\t\t//profile();\r\n\t\t},\r\n\t},\r\n]\r\n\r\nexport default function(): void {\r\n\r\n\tnew Chat(chatParams).insertBlock(\"#app\", true);\r\n}","//Страница авторизации\r\n\r\nimport TemplateGen from '../utilities/TemplateGen';\r\nimport Form, { FormParams, onSubmitForm }  from '../elements/form-block';\r\nimport Input, { InputParams }  from '../elements/input-block';\r\nimport Button, { ButtonParams }  from '../elements/button-block';\r\nimport registration from './registration';\r\nimport chat from './chat';\r\n\r\n//import profile from './profile';\r\n\r\nconst authorizationForm: FormParams = {\r\n\ttitle: 'Вход',\r\n}\r\n\r\nconst authorizationInputs: InputParams[] = [\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'login',\r\n\t\tname: 'login',\r\n\t\tlabel: 'Логин',\r\n\t\tvalue: '',\r\n\t\ttype: 'text',\r\n\t\trequired: true,\r\n\t\terrorText: '',\r\n\t\tvalidationType: '',\r\n\t\tclassList: '',\r\n\t},\r\n\t{\r\n\t\telement: '.reg-form-fieldset',\r\n\t\tid: 'password',\r\n\t\tname: 'password',\r\n\t\tlabel: 'Пароль',\r\n\t\tvalue: '',\r\n\t\ttype: 'password',\r\n\t\trequired: true,\r\n\t\terrorText: '',\r\n\t\tvalidationType: '',\r\n\t\tclassList: '',\r\n\t},\r\n];\r\n\r\nconst authorizationButtons: ButtonParams[] = [\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Авторизоваться',\r\n\t\tclasses: 'add-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tonSubmitForm(function(){\r\n\t\t\t\tchat();\r\n\t\t\t});\t\t\t\r\n\t\t},\r\n\t},\r\n\t{\r\n\t\telement: '.buttons-wrapper',\r\n\t\tid: '',\r\n\t\tname: 'Зарегистрироваться',\r\n\t\tclasses: 'reg-link',\r\n\t\tonClick: (event) => {\r\n\t\t\tevent.preventDefault();\r\n\t\t\tregistration();\r\n\t\t\t//profile();\r\n\t\t},\r\n\t},\r\n]\r\n\r\nexport default function(): void {\r\n\r\n\tnew Form(authorizationForm).insertBlock(\"#app\", true);\r\n\r\n\tauthorizationInputs.forEach(function(input) {\r\n\t\tnew Input(input, '').insertBlock(input.element);\r\n\t});\r\n\r\n\tauthorizationButtons.forEach(function(button) {\r\n\t\tnew Button(button).insertBlock(button.element);\r\n\t});\r\n}","import './scss/init.scss';\r\nimport authorization from './pages/authorization';\r\nimport error from './pages/error';\r\n\r\nfunction ready() {\r\n\tauthorization();\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", ready);"],"names":["$ea179994c2e62f0e$export$2e2bcd8739ae039","TEMPLATE_REGULAR","templateBlock","constructor","this","generateTemplate","template","changeTemplateKeys","tmp","templateRegular","templateKeys","exec","templateKey","key","templateValue","toString","replace","$2f12cd551daa3e41$export$2e2bcd8739ae039","params","render","insertBlock","element","clean","inner","DOMParser","parseFromString","getElementsByTagName","childNodes","wrapper","document","querySelector","removeAttribute","innerHTML","$c06e06c0e2a8e299$var$validationRegex","email","RegExp","login","name","phone","password","$c06e06c0e2a8e299$export$5ca26c99531348ec","input","validationType","getAttribute","errorText","value","regex","inputWrapper","parentElement","errorBlock","test","classList","add","textContent","remove","$160682af531b0660$export$2e2bcd8739ae039","super","insertedBlock","appendChild","form","formBlocks","querySelectorAll","infoBlock","isFormValid","repeatPassword","forEach","formBlock","contains","addEventListener","$56aaf2b78fa10785$export$2e2bcd8739ae039","onClick","$fb81a59f87df34a9$var$registrationForm","title","$fb81a59f87df34a9$var$registrationInputs","id","label","type","required","$fb81a59f87df34a9$var$registrationButtons","classes","event","preventDefault","$160682af531b0660$export$163d82ae5407ed7c","$9d66ae0e255a5bf1$export$2e2bcd8739ae039","$fb81a59f87df34a9$export$2e2bcd8739ae039","$3b5868aba66e82f2$export$2e2bcd8739ae039","button","$02abb5fcca8ec534$var$chatParams","chatUserName","$9d66ae0e255a5bf1$var$authorizationForm","$9d66ae0e255a5bf1$var$authorizationInputs","$9d66ae0e255a5bf1$var$authorizationButtons","$1b9a869b90a3ae4b$export$2e2bcd8739ae039"],"version":3,"file":"index.c5a65acd.js.map","sourceRoot":"../"}